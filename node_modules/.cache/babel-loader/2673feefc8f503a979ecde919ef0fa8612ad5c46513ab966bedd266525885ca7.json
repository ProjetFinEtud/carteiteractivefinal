{"ast":null,"code":"import React,{useState}from\"react\";import Typography from\"@mui/material/Typography\";import CssBaseline from\"@mui/material/CssBaseline\";import Container from\"@mui/material/Container\";import Paper from\"@mui/material/Paper\";import Grid from\"@mui/material/Grid\";import TextField from\"@mui/material/TextField\";import Button from\"@mui/material/Button\";import{Form}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ForgotPassword(){const[email,setEmail]=useState(\"\");const[error,setError]=useState(\"\");const[success,setSuccess]=useState(false);const navigate=useNavigate();const handleEmailChange=event=>{setEmail(event.target.value);setError(\"\");};const handleSendEmail=async()=>{if(!email){setError(\"Veuillez entrer votre adresse e-mail.\");return;}try{const response=await fetch(\"/auth/resetpassword\",{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email})});if(!response.ok){if(response.status===400){setError(\"Veuillez saisir votre adresse email d'inscription.\");}else{setError(\"Une erreur s'est produite. Veuillez réessayer plus tard.\");}}else{setSuccess(true);setTimeout(()=>{navigate(\"/\");},2000);navigate(\"/connexion\");}}catch(error){setError(error.message);}};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"sm\",sx:{mb:4},children:/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",sx:{my:{xs:3,md:6},p:{xs:2,md:3}},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h4\",align:\"center\",children:/*#__PURE__*/_jsx(\"em\",{children:\"Mot de passe oubli\\xE9\"})}),/*#__PURE__*/_jsxs(Typography,{component:\"h1\",variant:\"h5\",align:\"center\",children:[success&&/*#__PURE__*/_jsxs(Form.Text,{className:\"text-success\",children:[\"Un e-mail de r\\xE9initialisation de mot de passe a \\xE9t\\xE9 envoy\\xE9 \\xE0 \",email,\".\"]}),error&&/*#__PURE__*/_jsx(Form.Text,{className:\"text-danger\",children:error})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:12,children:[/*#__PURE__*/_jsx(TextField,{id:\"email\",name:\"email\",label:\"Adresse e-mail\",fullWidth:true,autoComplete:\"email\",value:email,onChange:handleEmailChange}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-danger\"})]})}),/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"flex-end\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleSendEmail,children:\"Envoyer l'e-mail de r\\xE9initialisation\"})})]})})]});}","map":{"version":3,"names":["React","useState","Typography","CssBaseline","Container","Paper","Grid","TextField","Button","Form","useNavigate","jsx","_jsx","jsxs","_jsxs","ForgotPassword","email","setEmail","error","setError","success","setSuccess","navigate","handleEmailChange","event","target","value","handleSendEmail","response","fetch","method","headers","body","JSON","stringify","ok","status","setTimeout","message","Fragment","children","component","maxWidth","sx","mb","variant","my","xs","md","p","align","Text","className","container","spacing","item","sm","id","name","label","fullWidth","autoComplete","onChange","justifyContent","color","onClick"],"sources":["C:/Users/abdou/Documents/S9-S10/ProjetFinDetudes/Jalon3/v2/demo - Copie/server/client/src/Components/Auth/ForgotPassword/ForgotPassword.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport CssBaseline from \"@mui/material/CssBaseline\";\r\nimport Container from \"@mui/material/Container\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { Form } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function ForgotPassword() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(false);\r\n  const navigate = useNavigate();\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n    setError(\"\");\r\n  };\r\n\r\n  const handleSendEmail = async () => {\r\n    if (!email) {\r\n      setError(\"Veuillez entrer votre adresse e-mail.\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await fetch(\"/auth/resetpassword\", {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ email }),\r\n      });\r\n\r\n     if (!response.ok) {\r\n      \r\n        if(response.status === 400) {\r\n          setError(\"Veuillez saisir votre adresse email d'inscription.\");\r\n        } else {\r\n          setError(\"Une erreur s'est produite. Veuillez réessayer plus tard.\");\r\n        }\r\n      } else {\r\n        setSuccess(true);\r\n        setTimeout(() => {\r\n          navigate(\"/\");\r\n        }, 2000);\r\n        navigate(\"/connexion\")\r\n      }\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <CssBaseline />\r\n      <Container component=\"main\" maxWidth=\"sm\" sx={{ mb: 4 }}>\r\n        <Paper\r\n          variant=\"outlined\"\r\n          sx={{ my: { xs: 3, md: 6 }, p: { xs: 2, md: 3 } }}\r\n        >\r\n          <Typography component=\"h1\" variant=\"h4\" align=\"center\">\r\n            <em>Mot de passe oublié</em>\r\n          </Typography>\r\n          <Typography component=\"h1\" variant=\"h5\" align=\"center\">\r\n            {success && (\r\n              <Form.Text className=\"text-success\">Un e-mail de réinitialisation de mot de passe a été envoyé à {email}.</Form.Text>\r\n            )}\r\n            {error && (\r\n              <Form.Text className=\"text-danger\">{error}</Form.Text>\r\n            )}\r\n          </Typography>\r\n\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12} sm={12}>\r\n              <TextField\r\n                id=\"email\"\r\n                name=\"email\"\r\n                label=\"Adresse e-mail\"\r\n                fullWidth\r\n                autoComplete=\"email\"\r\n                value={email}\r\n                onChange={handleEmailChange}\r\n              />\r\n              <Form.Text className=\"text-danger\"></Form.Text>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid container justifyContent=\"flex-end\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={handleSendEmail}\r\n            >\r\n              Envoyer l'e-mail de réinitialisation\r\n            </Button>\r\n          </Grid>\r\n        </Paper>\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}