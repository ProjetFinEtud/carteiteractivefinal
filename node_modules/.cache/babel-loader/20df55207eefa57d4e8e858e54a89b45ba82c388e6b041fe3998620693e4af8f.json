{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Modal from\"react-bootstrap/Modal\";import Button from\"react-bootstrap/Button\";import Form from\"react-bootstrap/Form\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const DeleteStudent=()=>{const navigate=useNavigate();const[showModal,setShowModal]=useState(false);const[raisonSup,setRaisonSup]=useState(\"\");const logout=()=>{sessionStorage.removeItem(\"accessToken\");setTimeout(()=>{navigate(\"/\");reloadPage();},2000);return;};const reloadPage=()=>{window.location.reload();};const handleChange=event=>{setRaisonSup(event.target.value);};const handleCloseModal=()=>{setShowModal(false);};const handleShowModal=()=>{setShowModal(true);};const confirmDelete=async()=>{try{const response=await fetch(\"/user/userDeleteHisAccount\",{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",accessToken:sessionStorage.getItem(\"accessToken\")},body:JSON.stringify({raisonSup})});if(!response.ok){console.error(\"Erreur lors de la suppression de l'étudiant:\",response.status);return;}if(response.status===200){logout();}}catch(error){console.error(\"Erreur lors de la suppression de l'étudiant:\",error.message);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Supprimer votre compte\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Au regret de vous voir partir\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:handleShowModal,children:\"Supprimer l'\\xE9tudiant\"}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:handleCloseModal,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Confirmation de la suppression\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[\"\\xCAtes-vous s\\xFBr de vouloir supprimer votre compte ?\",/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,placeholder:\"Raison de la suppression\",name:\"raisonsup\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleCloseModal,children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:confirmDelete,children:\"Supprimer\"})]})]})]});};export default DeleteStudent;","map":{"version":3,"names":["React","useState","useNavigate","Modal","Button","Form","jsx","_jsx","jsxs","_jsxs","DeleteStudent","navigate","showModal","setShowModal","raisonSup","setRaisonSup","logout","sessionStorage","removeItem","setTimeout","reloadPage","window","location","reload","handleChange","event","target","value","handleCloseModal","handleShowModal","confirmDelete","response","fetch","method","headers","accessToken","getItem","body","JSON","stringify","ok","console","error","status","message","children","className","onClick","show","onHide","centered","Header","closeButton","Title","Body","Control","as","rows","placeholder","name","onChange","Footer","variant"],"sources":["C:/Users/abdou/Documents/S9-S10/ProjetFinDetudes/Jalon3/v2/demo - Copie/server/client/src/Components/Utilisateurs/ProfilExStudent/DeleteExstudent.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nconst DeleteStudent = () => {\r\n  const navigate = useNavigate();\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [raisonSup, setRaisonSup] = useState(\"\");\r\n\r\n  const logout = (() =>{\r\n    sessionStorage.removeItem(\"accessToken\")\r\n\r\n    setTimeout(() => {\r\n      navigate(\"/\")\r\n      reloadPage()\r\n    }, 2000);\r\n    \r\n    return\r\n})\r\nconst reloadPage = () => {\r\n  window.location.reload();\r\n}\r\n\r\n  const handleChange = (event) => {\r\n    setRaisonSup(event.target.value);\r\n  };\r\n\r\n\r\n\r\n  const handleCloseModal = () => {\r\n    setShowModal(false);\r\n  };\r\n\r\n  const handleShowModal = () => {\r\n    setShowModal(true);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    try {\r\n        const response = await fetch(`/user/userDeleteHisAccount`, {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            accessToken: sessionStorage.getItem(\"accessToken\"),\r\n          },\r\n          body: JSON.stringify({ raisonSup }),\r\n        });\r\n  \r\n        if (!response.ok) {\r\n          console.error(\r\n            \"Erreur lors de la suppression de l'étudiant:\",\r\n            response.status\r\n          );\r\n          return;\r\n        }\r\n        if (response.status === 200) {\r\n            logout()\r\n        }\r\n      } catch (error) {\r\n        console.error(\r\n          \"Erreur lors de la suppression de l'étudiant:\",\r\n          error.message\r\n        );\r\n      }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Supprimer votre compte</h2>\r\n      <p>Au regret de vous voir partir</p>\r\n      <button className=\"btn btn-danger\" onClick={handleShowModal}>\r\n        Supprimer l'étudiant\r\n      </button>\r\n\r\n      <Modal show={showModal} onHide={handleCloseModal} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Confirmation de la suppression</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          Êtes-vous sûr de vouloir supprimer votre compte ?\r\n          <Form.Control\r\n            as=\"textarea\"\r\n            rows={3}\r\n            placeholder=\"Raison de la suppression\"\r\n            name=\"raisonsup\"\r\n            onChange={handleChange}\r\n          />\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleCloseModal}>\r\n            Annuler\r\n          </Button>\r\n          <Button variant=\"danger\" onClick={confirmDelete}>\r\n            Supprimer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteStudent;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,uBAAuB,CACzC,MAAO,CAAAC,MAAM,KAAM,wBAAwB,CAC3C,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExC,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAC,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACU,SAAS,CAAEC,YAAY,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACa,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAE9C,KAAM,CAAAe,MAAM,CAAIA,CAAA,GAAK,CACnBC,cAAc,CAACC,UAAU,CAAC,aAAa,CAAC,CAExCC,UAAU,CAAC,IAAM,CACfR,QAAQ,CAAC,GAAG,CAAC,CACbS,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,IAAI,CAAC,CAER,OACJ,CAAE,CACF,KAAM,CAAAA,UAAU,CAAGA,CAAA,GAAM,CACvBC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CAAC,CAEC,KAAM,CAAAC,YAAY,CAAIC,KAAK,EAAK,CAC9BV,YAAY,CAACU,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAClC,CAAC,CAID,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7Bf,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAED,KAAM,CAAAgB,eAAe,CAAGA,CAAA,GAAM,CAC5BhB,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED,KAAM,CAAAiB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,8BAA+B,CACzDC,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,WAAW,CAAElB,cAAc,CAACmB,OAAO,CAAC,aAAa,CACnD,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEzB,SAAU,CAAC,CACpC,CAAC,CAAC,CAEF,GAAI,CAACiB,QAAQ,CAACS,EAAE,CAAE,CAChBC,OAAO,CAACC,KAAK,CACX,8CAA8C,CAC9CX,QAAQ,CAACY,MACX,CAAC,CACD,OACF,CACA,GAAIZ,QAAQ,CAACY,MAAM,GAAK,GAAG,CAAE,CACzB3B,MAAM,CAAC,CAAC,CACZ,CACF,CAAE,MAAO0B,KAAK,CAAE,CACdD,OAAO,CAACC,KAAK,CACX,8CAA8C,CAC9CA,KAAK,CAACE,OACR,CAAC,CACH,CACJ,CAAC,CAED,mBACEnC,KAAA,QAAAoC,QAAA,eACEtC,IAAA,OAAAsC,QAAA,CAAI,wBAAsB,CAAI,CAAC,cAC/BtC,IAAA,MAAAsC,QAAA,CAAG,+BAA6B,CAAG,CAAC,cACpCtC,IAAA,WAAQuC,SAAS,CAAC,gBAAgB,CAACC,OAAO,CAAElB,eAAgB,CAAAgB,QAAA,CAAC,yBAE7D,CAAQ,CAAC,cAETpC,KAAA,CAACN,KAAK,EAAC6C,IAAI,CAAEpC,SAAU,CAACqC,MAAM,CAAErB,gBAAiB,CAACsB,QAAQ,MAAAL,QAAA,eACxDtC,IAAA,CAACJ,KAAK,CAACgD,MAAM,EAACC,WAAW,MAAAP,QAAA,cACvBtC,IAAA,CAACJ,KAAK,CAACkD,KAAK,EAAAR,QAAA,CAAC,gCAA8B,CAAa,CAAC,CAC7C,CAAC,cACfpC,KAAA,CAACN,KAAK,CAACmD,IAAI,EAAAT,QAAA,EAAC,yDAEV,cAAAtC,IAAA,CAACF,IAAI,CAACkD,OAAO,EACXC,EAAE,CAAC,UAAU,CACbC,IAAI,CAAE,CAAE,CACRC,WAAW,CAAC,0BAA0B,CACtCC,IAAI,CAAC,WAAW,CAChBC,QAAQ,CAAEpC,YAAa,CACxB,CAAC,EACQ,CAAC,cACbf,KAAA,CAACN,KAAK,CAAC0D,MAAM,EAAAhB,QAAA,eACXtC,IAAA,CAACH,MAAM,EAAC0D,OAAO,CAAC,WAAW,CAACf,OAAO,CAAEnB,gBAAiB,CAAAiB,QAAA,CAAC,SAEvD,CAAQ,CAAC,cACTtC,IAAA,CAACH,MAAM,EAAC0D,OAAO,CAAC,QAAQ,CAACf,OAAO,CAAEjB,aAAc,CAAAe,QAAA,CAAC,WAEjD,CAAQ,CAAC,EACG,CAAC,EACV,CAAC,EACL,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnC,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}